<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MindGarden - Holistic Mental Wellness Platform</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4cafef;
      --secondary: #6c63ff;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --light: #f8f9fa;
      --dark: #343a40;
      --happy: #ffd166;
      --sad: #6c63ff;
      --stressed: #ef476f;
      --angry: #f25c54;
      --relaxed: #06d6a0;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #a8edea, #fed6e3);
      color: #333;
      line-height: 1.6;
      padding: 0;
      margin: 0;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      text-align: center;
      padding: 20px 0;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: var(--secondary);
      margin-bottom: 10px;
      font-size: 2.5rem;
    }
    
    .tagline {
      color: var(--dark);
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    
    .nav-tabs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
      gap: 10px;
    }
    
    .nav-tab {
      padding: 10px 20px;
      background: white;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .nav-tab:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .nav-tab.active {
      background: var(--secondary);
      color: white;
    }
    
    .card {
      background: white;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      display: none;
    }
    
    .card.active {
      display: block;
    }
    
    .card-title {
      font-size: 1.5rem;
      color: var(--secondary);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    label {
      font-weight: bold;
      display: block;
      margin: 15px 0 8px;
    }
    
    select, textarea, input, button {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      font-family: inherit;
    }
    
    textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    button {
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.3s;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background: var(--secondary);
    }
    
    .btn-success {
      background: var(--success);
    }
    
    .btn-warning {
      background: var(--warning);
    }
    
    .btn-danger {
      background: var(--danger);
    }
    
    .plant-container {
      text-align: center;
      margin: 20px 0;
      position: relative;
    }
    
    .plant {
      font-size: 80px;
      transition: all 0.5s ease;
      display: inline-block;
    }
    
    .garden {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
    }
    
    .garden-plant {
      font-size: 30px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .garden-plant:hover {
      transform: scale(1.2);
    }
    
    .output {
      margin-top: 20px;
      padding: 20px;
      border-radius: 10px;
      background: #f0f8ff;
      font-size: 16px;
    }
    
    iframe {
      margin-top: 15px;
      border-radius: 12px;
      width: 100%;
      height: 315px;
    }
    
    .history {
      margin-top: 20px;
      text-align: left;
      background: #fff3cd;
      padding: 15px;
      border-radius: 10px;
      font-size: 14px;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .history-entry {
      padding: 8px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .history-entry:last-child {
      border-bottom: none;
    }
    
    .resources-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .resource-card {
      background: var(--light);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    
    .resource-card:hover {
      transform: translateY(-5px);
    }
    
    .resource-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: var(--secondary);
    }
    
    .progress-container {
      margin: 20px 0;
      background: #f0f0f0;
      border-radius: 10px;
      height: 20px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: var(--success);
      border-radius: 10px;
      transition: width 0.5s ease;
    }
    
    .community-feed {
      margin-top: 20px;
    }
    
    .post {
      background: var(--light);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    
    .post-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      margin-right: 10px;
    }
    
    .breathing-animation {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: var(--primary);
      margin: 20px auto;
      animation: breathe 8s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }
    
    @keyframes breathe {
      0%, 100% { transform: scale(0.8); opacity: 0.7; }
      50% { transform: scale(1.5); opacity: 1; }
    }
    
    .exercise-container {
      text-align: center;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .stat-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--secondary);
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: var(--dark);
    }
    
    .mood-calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin: 20px 0;
    }
    
    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      background: #f0f0f0;
      font-size: 0.8rem;
      cursor: pointer;
    }
    
    .calendar-day.has-entry {
      background: var(--primary);
      color: white;
    }
    
    .crisis-resources {
      background: #fff3f3;
      border-left: 5px solid var(--danger);
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.5s ease;
      z-index: 1000;
    }
    
    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
    }
    
    @media (max-width: 768px) {
      .nav-tabs {
        flex-direction: column;
      }
      
      .resources-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-seedling"></i> MindGarden</h1>
      <p class="tagline">Cultivate your mental wellness, grow at your own pace</p>
      
      <div class="nav-tabs">
        <div class="nav-tab active" data-tab="checkin"><i class="fas fa-clipboard-check"></i> Daily Check-in</div>
        <div class="nav-tab" data-tab="garden"><i class="fas fa-leaf"></i> My Garden</div>
        <div class="nav-tab" data-tab="progress"><i class="fas fa-chart-line"></i> Progress</div>
        <div class="nav-tab" data-tab="resources"><i class="fas fa-book-open"></i> Resources</div>
        <div class="nav-tab" data-tab="community"><i class="fas fa-users"></i> Community</div>
        <div class="nav-tab" data-tab="exercises"><i class="fas fa-spa"></i> Exercises</div>
      </div>
    </header>

    <!-- Daily Check-in Tab -->
    <div class="card active" id="checkin">
      <h2 class="card-title"><i class="fas fa-clipboard-check"></i> How are you feeling today?</h2>
      
      <form id="moodForm">
        <label for="mood">Select your mood:</label>
        <select id="mood" required>
          <option value="">-- How are you feeling? --</option>
          <option value="happy">😊 Happy</option>
          <option value="sad">😔 Sad</option>
          <option value="stressed">😣 Stressed</option>
          <option value="angry">😡 Angry</option>
          <option value="relaxed">😌 Relaxed</option>
          <option value="anxious">😰 Anxious</option>
          <option value="tired">😴 Tired</option>
          <option value="neutral">😐 Neutral</option>
        </select>

        <label for="energy">Energy Level (1-10):</label>
        <input type="range" id="energy" min="1" max="10" value="5">
        <div style="display: flex; justify-content: space-between;">
          <span>Low</span>
          <span id="energy-value">5</span>
          <span>High</span>
        </div>

        <label for="gratitude">Today I'm grateful for:</label>
        <textarea id="gratitude" placeholder="List 3 things you're grateful for today..."></textarea>

        <label for="note">Additional thoughts or notes:</label>
        <textarea id="note" placeholder="What's on your mind?"></textarea>

        <button type="submit"><i class="fas fa-seedling"></i> Grow My MindGarden</button>
      </form>

      <div class="plant-container">
        <div class="plant" id="plant">🌱</div>
        <div class="progress-container">
          <div class="progress-bar" id="progress-bar" style="width: 30%;"></div>
        </div>
        <p>Your plant grows with each check-in!</p>
      </div>

      <div class="output" id="output"></div>
      <iframe id="video" src="" frameborder="0" allowfullscreen></iframe>
      
      <div class="crisis-resources">
        <h3><i class="fas fa-exclamation-circle"></i> Need Immediate Help?</h3>
        <p>If you're in crisis, please contact: National Suicide Prevention Lifeline at 988 or Crisis Text Line by texting HOME to 741741</p>
      </div>
    </div>

    <!-- My Garden Tab -->
    <div class="card" id="garden">
      <h2 class="card-title"><i class="fas fa-leaf"></i> My Mental Wellness Garden</h2>
      <p>Your garden reflects your mental health journey. Each plant represents a week of check-ins.</p>
      
      <div class="garden" id="garden-container">
        <!-- Plants will be added here dynamically -->
      </div>
      
      <div class="history" id="history">
        <strong><i class="fas fa-history"></i> Recent Check-ins:</strong><br>
      </div>
    </div>

    <!-- Progress Tab -->
    <div class="card" id="progress">
      <h2 class="card-title"><i class="fas fa-chart-line"></i> Your Progress</h2>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="streak-count">0</div>
          <div class="stat-label">Day Streak</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="total-checkins">0</div>
          <div class="stat-label">Total Check-ins</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="avg-mood">0</div>
          <div class="stat-label">Avg. Mood</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="gratitude-entries">0</div>
          <div class="stat-label">Gratitude Entries</div>
        </div>
      </div>
      
      <h3>Mood Calendar</h3>
      <div class="mood-calendar" id="mood-calendar">
        <!-- Calendar will be generated dynamically -->
      </div>
      
      <h3>Mood Trends</h3>
      <canvas id="mood-chart" width="400" height="200"></canvas>
    </div>

    <!-- Resources Tab -->
    <div class="card" id="resources">
      <h2 class="card-title"><i class="fas fa-book-open"></i> Mental Wellness Resources</h2>
      
      <div class="resources-grid">
        <div class="resource-card">
          <div class="resource-title"><i class="fas fa-head-side-virus"></i> Anxiety Resources</div>
          <p>Tools and techniques to manage anxiety</p>
          <button class="btn-secondary">Explore</button>
        </div>
        <div class="resource-card">
          <div class="resource-title"><i class="fas fa-bed"></i> Sleep Resources</div>
          <p>Improve your sleep quality</p>
          <button class="btn-secondary">Explore</button>
        </div>
        <div class="resource-card">
          <div class="resource-title"><i class="fas fa-heart"></i> Self-Care Resources</div>
          <p>Prioritize your well-being</p>
          <button class="btn-secondary">Explore</button>
        </div>
        <div class="resource-card">
          <div class="resource-title"><i class="fas fa-hands-helping"></i> Professional Help</div>
          <p>Find mental health professionals</p>
          <button class="btn-secondary">Explore</button>
        </div>
      </div>
      
      <h3>Recommended for You</h3>
      <div class="resources-grid" id="recommended-resources">
        <!-- Recommended resources will be added dynamically -->
      </div>
    </div>

    <!-- Community Tab -->
    <div class="card" id="community">
      <h2 class="card-title"><i class="fas fa-users"></i> Community Support</h2>
      <p>Share your journey and support others (all posts are anonymous).</p>
      
      <div class="post">
        <div class="post-header">
          <div class="avatar">U1</div>
          <div>
            <strong>Anonymous User</strong>
            <div class="date">2 hours ago</div>
          </div>
        </div>
        <p>Today I'm grateful for my morning coffee, the sunshine, and my supportive friends. Remember, it's okay to have bad days - they make the good ones better! 🌸</p>
        <div style="display: flex; gap: 15px; margin-top: 10px;">
          <button style="width: auto;"><i class="fas fa-heart"></i> Support (24)</button>
          <button style="width: auto;"><i class="fas fa-comment"></i> Comment (5)</button>
        </div>
      </div>
      
      <div class="post">
        <div class="post-header">
          <div class="avatar">U2</div>
          <div>
            <strong>Anonymous User</strong>
            <div class="date">1 day ago</div>
          </div>
        </div>
        <p>Struggling with anxiety today, but I did my breathing exercises and went for a short walk. Small steps still move you forward! 💪</p>
        <div style="display: flex; gap: 15px; margin-top: 10px;">
          <button style="width: auto;"><i class="fas fa-heart"></i> Support (42)</button>
          <button style="width: auto;"><i class="fas fa-comment"></i> Comment (8)</button>
        </div>
      </div>
      
      <h3>Share Your Thoughts (Anonymously)</h3>
      <textarea placeholder="What would you like to share with the community?"></textarea>
      <button class="btn-success"><i class="fas fa-paper-plane"></i> Post to Community</button>
    </div>

    <!-- Exercises Tab -->
    <div class="card" id="exercises">
      <h2 class="card-title"><i class="fas fa-spa"></i> Wellness Exercises</h2>
      
      <div class="exercise-container">
        <h3><i class="fas fa-wind"></i> Breathing Exercise</h3>
        <p>Follow the animation to practice deep breathing:</p>
        <div class="breathing-animation" id="breathing-animation">
          Breathe
        </div>
        <p>Inhale for 4 seconds, hold for 4 seconds, exhale for 6 seconds</p>
        <button class="btn-success" onclick="startBreathing()"><i class="fas fa-play"></i> Start Breathing Exercise</button>
      </div>
      
      <div style="margin-top: 30px;">
        <h3><i class="fas fa-spa"></i> 5-Minute Meditation</h3>
        <p>Take a moment to center yourself with a guided meditation:</p>
        <audio controls style="width: 100%; margin: 15px 0;">
          <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <button class="btn-secondary"><i class="fas fa-headphones"></i> Play Meditation</button>
      </div>
      
      <div style="margin-top: 30px;">
        <h3><i class="fas fa-pencil-alt"></i> Journaling Prompts</h3>
        <p>Try one of these prompts to start writing:</p>
        <ul style="margin: 15px 0 15px 20px;">
          <li>What made me smile today?</li>
          <li>What's something I'm looking forward to?</li>
          <li>What's a challenge I overcame recently?</li>
        </ul>
        <button class="btn-warning"><i class="fas fa-pencil-alt"></i> Start Journaling</button>
      </div>
    </div>

    <footer>
      <p>MindGarden &copy; 2025 - Cultivating mental wellness for all</p>
      <p>If you're in crisis, please contact: National Suicide Prevention Lifeline at 988</p>
    </footer>
  </div>

  <!-- Background Relaxing Music -->
  <audio id="music" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-relaxing.mp3" type="audio/mpeg">
  </audio>

  <div class="notification" id="notification">
    <i class="fas fa-check-circle" style="color: var(--success);"></i>
    <div id="notification-text">Check-in completed successfully!</div>
  </div>

  <script>
    // DOM Elements
    const navTabs = document.querySelectorAll('.nav-tab');
    const cards = document.querySelectorAll('.card');
    const form = document.getElementById("moodForm");
    const output = document.getElementById("output");
    const plant = document.getElementById("plant");
    const music = document.getElementById("music");
    const video = document.getElementById("video");
    const historyDiv = document.getElementById("history");
    const energySlider = document.getElementById("energy");
    const energyValue = document.getElementById("energy-value");
    const progressBar = document.getElementById("progress-bar");
    const gardenContainer = document.getElementById("garden-container");
    const notification = document.getElementById("notification");
    const notificationText = document.getElementById("notification-text");

    // Mood data
    const messages = {
      happy: [
        "Keep shining 🌟! Happiness is contagious.",
        "Enjoy the little things that make you smile 😄"
      ],
      sad: [
        "It's okay to feel sad 💙, brighter days are coming.",
        "Take a deep breath. You're stronger than you think 🌈"
      ],
      stressed: [
        "Pause. Breathe deeply 5 times 🌬️",
        "Try listening to calming music 🎶"
      ],
      angry: [
        "Channel your energy into something creative 🎨",
        "Take a short walk 🚶 to cool down"
      ],
      relaxed: [
        "Peace looks good on you 🌸",
        "Keep embracing the calm 😌"
      ],
      anxious: [
        "Focus on what you can control right now 🌼",
        "This feeling will pass. You've gotten through this before 💪"
      ],
      tired: [
        "Listen to your body and rest if you need to 🛌",
        "Even small steps forward are progress 🌈"
      ],
      neutral: [
        "Not every day needs to be extraordinary 🌿",
        "Balance is beautiful too ⚖️"
      ]
    };

    const videos = {
      happy: "https://www.youtube.com/embed/ZbZSe6N_BXs",
      sad: "https://www.youtube.com/embed/2Vv-BfVoq4g",
      stressed: "https://www.youtube.com/embed/2OEL4P1Rz04",
      angry: "https://www.youtube.com/embed/2vjPBrBU-TM",
      relaxed: "https://www.youtube.com/embed/cCSLwGniP4Y",
      anxious: "https://www.youtube.com/embed/2OEL4P1Rz04",
      tired: "https://www.youtube.com/embed/cCSLwGniP4Y",
      neutral: "https://www.youtube.com/embed/ZbZSe6N_BXs"
    };

    const plantEmojis = {
      seed: "🌱",
      sprout: "🌿",
      budding: "🪴",
      flowering: "🌷",
      thriving: "🌺",
      special: "🌻"
    };

    // Energy slider update
    energySlider.addEventListener('input', () => {
      energyValue.textContent = energySlider.value;
    });

    // Navigation tabs
    navTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabId = tab.getAttribute('data-tab');
        
        // Update active tab
        navTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Show corresponding card
        cards.forEach(card => card.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
      });
    });

    // Form submission
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const mood = document.getElementById("mood").value;
      const energy = document.getElementById("energy").value;
      const gratitude = document.getElementById("gratitude").value;
      const note = document.getElementById("note").value;

      if (!mood) {
        showNotification("Please select your mood!", "error");
        return;
      }

      // Play music
      music.play();

      // Update plant growth
      updatePlant(mood);

      // Random message
      const moodMessages = messages[mood];
      const randomMsg = moodMessages[Math.floor(Math.random() * moodMessages.length)];

      output.innerHTML = `
        <strong>Your Mood:</strong> ${mood.toUpperCase()} <br>
        <strong>Energy Level:</strong> ${energy}/10 <br>
        <strong>Gratitude:</strong> ${gratitude || "No gratitude listed"} <br>
        <strong>Notes:</strong> ${note || "No note added"} <br><br>
        💡 <em>${randomMsg}</em>
      `;

      // Set video
      video.src = videos[mood];

      // Save check-in
      saveCheckin(mood, energy, gratitude, note);
      
      // Show success notification
      showNotification("Daily check-in completed! Your garden has grown. 🌱");
    });

    // Save check-in to localStorage
    function saveCheckin(mood, energy, gratitude, note) {
      let history = JSON.parse(localStorage.getItem("mindgarden_history")) || [];
      const checkin = { 
        date: new Date().toISOString(), 
        mood, 
        energy, 
        gratitude, 
        note 
      };
      history.push(checkin);
      localStorage.setItem("mindgarden_history", JSON.stringify(history));
      
      updateHistoryDisplay();
      updateGarden();
      updateStats();
    }

    // Update history display
    function updateHistoryDisplay() {
      let history = JSON.parse(localStorage.getItem("mindgarden_history")) || [];
      historyDiv.innerHTML = "<strong><i class='fas fa-history'></i> Recent Check-ins:</strong><br>";
      
      // Show only last 5 entries
      const recentHistory = history.slice(-5);
      
      recentHistory.forEach(entry => {
        const date = new Date(entry.date).toLocaleDateString();
        historyDiv.innerHTML += `
          <div class="history-entry">
            ${date}: ${entry.mood} (Energy: ${entry.energy}/10)
          </div>
        `;
      });
    }

    // Update plant based on mood and growth
    function updatePlant(mood) {
      let history = JSON.parse(localStorage.getItem("mindgarden_history")) || [];
      const growthStage = Math.min(Math.floor(history.length / 5), 4);
      
      const plantStages = [
        plantEmojis.seed,
        plantEmojis.sprout,
        plantEmojis.budding,
        plantEmojis.flowering,
        plantEmojis.thriving
      ];
      
      // Special plant for consistent good mood
      if (history.length > 7) {
        const recentMoods = history.slice(-7).map(entry => entry.mood);
        const positiveMoods = recentMoods.filter(m => m === "happy" || m === "relaxed");
        if (positiveMoods.length >= 5) {
          plant.textContent = plantEmojis.special;
          plant.style.transform = "scale(1.5)";
          setTimeout(() => plant.style.transform = "scale(1)", 500);
          
          // Update progress bar
          progressBar.style.width = "100%";
          progressBar.style.background = "var(--success)";
          return;
        }
      }
      
      plant.textContent = plantStages[growthStage];
      plant.style.transform = "scale(1.3)";
      setTimeout(() => plant.style.transform = "scale(1)", 500);
      
      // Update progress bar
      const progress = ((history.length % 5) / 5) * 100;
      progressBar.style.width = `${progress}%`;
    }

    // Update garden display
    function updateGarden() {
      let history = JSON.parse(localStorage.getItem("mindgarden_history")) || [];
      const weeks = Math.floor(history.length / 7);
      
      gardenContainer.innerHTML = "";
      
      for (let i = 0; i < weeks; i++) {
        const plantDiv = document.createElement("div");
        plantDiv.className = "garden-plant";
        plantDiv.textContent = plantEmojis.thriving;
        plantDiv.title = `Week ${i+1} of check-ins`;
        gardenContainer.appendChild(plantDiv);
      }
      
      // Add current week plant
      if (history.length > 0) {
        const currentWeekProgress = history.length % 7;
        const growthStage = Math.floor((currentWeekProgress / 7) * 4);
        
        const plantStages = [
          plantEmojis.seed,
          plantEmojis.sprout,
          plantEmojis.budding,
          plantEmojis.flowering
        ];
        
        const plantDiv = document.createElement("div");
        plantDiv.className = "garden-plant";
        plantDiv.textContent = plantStages[growthStage] || plantEmojis.seed;
        plantDiv.title = `Week ${weeks+1} - ${currentWeekProgress}/7 days`;
        gardenContainer.appendChild(plantDiv);
      }
    }

    // Update statistics
    function updateStats() {
      let history = JSON.parse(localStorage.getItem("mindgarden_history")) || [];
      
      // Calculate streak
      let streak = 0;
      if (history.length > 0) {
        const today = new Date().toDateString();
        const lastDate = new Date(history[history.length - 1].date).toDateString();
        
        if (today === lastDate) {
          streak = 1;
          // Check previous days
          for (let i = history.length - 2; i >= 0; i--) {
            const currentDate = new Date(history[i].date).toDateString();
            const prevDate = new Date(history[i + 1].date);
            prevDate.setDate(prevDate.getDate() - 1);
            
            if (currentDate === prevDate.toDateString()) {
              streak++;
            } else {
              break;
            }
          }
        }
      }
      
      document.getElementById("streak-count").textContent = streak;
      document.getElementById("total-checkins").textContent = history.length;
      
      // Calculate average mood (simplified)
      if (history.length > 0) {
        const moodValues = {
          happy: 5,
          relaxed: 4,
          neutral: 3,
          tired: 2,
          sad: 2,
          anxious: 2,
          stressed: 1,
          angry: 1
        };
        
        const total = history.reduce((sum, entry) => sum + (moodValues[entry.mood] || 3), 0);
        const average = (total / history.length).toFixed(1);
        document.getElementById("avg-mood").textContent = average;
      }
      
      // Count gratitude entries
      const gratitudeEntries = history.filter(entry => entry.gratitude && entry.gratitude.trim() !== "").length;
      document.getElementById("gratitude-entries").textContent = gratitudeEntries;
    }

    // Breathing exercise
    function startBreathing() {
      const animation = document.getElementById("breathing-animation");
      animation.textContent = "Breathe In";
      animation.style.background = "var(--success)";
      
      setTimeout(() => {
        animation.textContent = "Hold";
        animation.style.background = "var(--warning)";
      }, 4000);
      
      setTimeout(() => {
        animation.textContent = "Breathe Out";
        animation.style.background = "var(--primary)";
      }, 8000);
      
      setTimeout(() => {
        animation.textContent = "Breathe";
        animation.style.background = "var(--secondary)";
      }, 14000);
      
      showNotification("Breathing exercise started. Follow the animation!");
    }

    // Show notification
    function showNotification(message, type = "success") {
      notificationText.innerHTML = message;
      
      if (type === "error") {
        notification.style.background = "#fff3f3";
        notification.style.borderLeft = "5px solid var(--danger)";
        notificationText.innerHTML = `<i class="fas fa-exclamation-circle" style="color: var(--danger);"></i> ${message}`;
      } else {
        notification.style.background = "#f0f8ff";
        notification.style.borderLeft = "5px solid var(--success)";
      }
      
      notification.classList.add("show");
      
      setTimeout(() => {
        notification.classList.remove("show");
      }, 3000);
    }

    // Initialize on page load
    window.onload = () => {
      updateHistoryDisplay();
      updateGarden();
      updateStats();
      
      // Load initial plant state
      let history = JSON.parse(localStorage.getItem("mindgarden_history")) || [];
      if (history.length > 0) {
        const lastEntry = history[history.length - 1];
        updatePlant(lastEntry.mood);
      }
    };
  </script>
</body>
</html>